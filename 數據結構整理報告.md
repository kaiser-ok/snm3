# ç¶²è·¯ç®¡ç†ç³»çµ±æ•¸æ“šçµæ§‹æ•´ç†å ±å‘Š

**å ±å‘Šç”Ÿæˆæ™‚é–“:** 2025-11-05
**ç³»çµ±åç¨±:** GSNM (GSN Network Management System)

---

## ç›®éŒ„
1. [å¿«é€Ÿåƒè€ƒ - ç´¢å¼•èˆ‡è¡¨æ ¼æ¸…å–®](#å¿«é€Ÿåƒè€ƒ---ç´¢å¼•èˆ‡è¡¨æ ¼æ¸…å–®)
2. [é€£ç·šè³‡è¨Š](#é€£ç·šè³‡è¨Š)
3. [ElasticSearch æ•¸æ“šçµæ§‹](#elasticsearch-æ•¸æ“šçµæ§‹)
4. [MySQL æ•¸æ“šçµæ§‹](#mysql-æ•¸æ“šçµæ§‹)
5. [æ•¸æ“šæµå‘èˆ‡é—œè¯](#æ•¸æ“šæµå‘èˆ‡é—œè¯)

---

## å¿«é€Ÿåƒè€ƒ - ç´¢å¼•èˆ‡è¡¨æ ¼æ¸…å–®

### ElasticSearch ç´¢å¼•æ¸…å–®

#### ç¶²è·¯æµé‡èˆ‡ç›£æ§ (æŒ‰æ—¥åˆ†å€)
| ç´¢å¼•åç¨± | æè¿° | æ•¸æ“šé‡ | é‡è¦æ€§ |
|---------|------|--------|--------|
| **radar_flow_collector-YYYY.MM.DD** | NetFlow/IPFIX ç¶²è·¯æµé‡æ•¸æ“š | 34-57M è¨˜éŒ„/æ—¥, 5-15GB | â­â­â­â­â­ |
| **ip_mapping-YYYY.MM.DD** | IP-MAC åœ°å€æ˜ å°„é—œä¿‚ (SNMP) | 500-1400 è¨˜éŒ„/æ—¥ | â­â­â­â­â­ |
| **location-YYYY.MM.DD** | è¨­å‚™åœ¨äº¤æ›æ©Ÿçš„ç‰©ç†ä½ç½® | 55K-80K è¨˜éŒ„/æ—¥ | â­â­â­â­ |
| **ip_info_event-YYYY.MM.DD** | IP å‡ºç¾/æ¶ˆå¤±äº‹ä»¶è¨˜éŒ„ | 1600-4400 è¨˜éŒ„/æ—¥ | â­â­â­ |
| **status-YYYY.MM.DD** | äº¤æ›æ©Ÿç¡¬é«”ç‹€æ…‹ (CPU/Memory/Port) | 6K-25K è¨˜éŒ„/æ—¥ | â­â­â­â­â­ |

#### çµ±è¨ˆæ•¸æ“š (å¤šæ™‚é–“ç²’åº¦)
| ç´¢å¼•åç¨± | æè¿° | æ™‚é–“ç²’åº¦ | ç”¨é€” |
|---------|------|---------|------|
| **statistics_switch_5m-YYYY.MM.DD** | äº¤æ›æ©ŸåŸ æµé‡çµ±è¨ˆ | 5 åˆ†é˜ | çŸ­æœŸæµé‡åˆ†æ |
| **statistics_switch_1h-YYYY.MM.DD** | äº¤æ›æ©ŸåŸ æµé‡çµ±è¨ˆ | 1 å°æ™‚ | ä¸­æœŸè¶¨å‹¢åˆ†æ |
| **statistics_switch_1d-YYYY.MM.DD** | äº¤æ›æ©ŸåŸ æµé‡çµ±è¨ˆ | 1 å¤© | é•·æœŸè¶¨å‹¢åˆ†æ |
| **mac_broadcast_summary_5m-YYYY.MM.DD** | MAC å»£æ’­é‡çµ±è¨ˆ | 5 åˆ†é˜ | å»£æ’­é¢¨æš´åµæ¸¬ |
| **statistics_unit_info_1d-YYYY.MM** | å–®ä½çµ±è¨ˆè³‡è¨Š | 1 å¤© (æœˆç´¢å¼•) | å–®ä½ç´šåˆ¥å½™ç¸½ |

#### è¨­å‚™èˆ‡æ„Ÿæ¸¬å™¨
| ç´¢å¼•åç¨± | æè¿° | æ•¸æ“šé‡ | ç”¨é€” |
|---------|------|--------|------|
| **device_availability-YYYY.MM** | è¨­å‚™å¯ç”¨æ€§çµ±è¨ˆ | 100-900 è¨˜éŒ„/æœˆ | è¨­å‚™å¥åº·ç›£æ§ |
| **iot_info-YYYY.MM.DD** | IoT æº«æ¿•åº¦æ„Ÿæ¸¬å™¨æ•¸æ“š | ~1400 è¨˜éŒ„/æ—¥ | ç’°å¢ƒç›£æ§ |

#### æ—¥èªŒèˆ‡è¨ªå•è¨˜éŒ„
| ç´¢å¼•åç¨± | æè¿° | æ•¸æ“šé‡ | ç”¨é€” |
|---------|------|--------|------|
| **syslog-YYYY.MM.DD** | ç³»çµ±æ—¥èªŒ | 4-6M è¨˜éŒ„/æ—¥, 1-1.3GB | ç³»çµ±äº‹ä»¶è¿½è¹¤ |
| **idc_access_log-YYYY.MM.DD** | IDC è¨ªå•æ—¥èªŒ | 150-220 è¨˜éŒ„/æ—¥ | è¨ªå•å¯©è¨ˆ |

---

### MySQL è¡¨æ ¼æ¸…å–®

#### æ ¸å¿ƒç®¡ç†è¡¨
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **Device** | ç¶²è·¯è¨­å‚™æ¸…å–® (äº¤æ›æ©Ÿ/è·¯ç”±å™¨/é˜²ç«ç‰†) | IP, MAC, UnitID, Type, Vendor | è¨­å‚™ç®¡ç†æ ¸å¿ƒè¡¨ |
| **Unit** | å–®ä½/çµ„ç¹”æ¶æ§‹ | UnitID, UnitName, radarMAC, expIP | å¤šç§Ÿæˆ¶ç®¡ç† |
| **radar** | Flow æ”¶é›†å™¨/æ¢æ¸¬å™¨é…ç½® | ip, mac, l2tp_client_ip | NetFlow æ¡é›†è¨­å®š |
| **User_Station** | ç”¨æˆ¶çµ‚ç«¯è¨­å‚™ | IP, StationMAC, Account | çµ‚ç«¯è¨­å‚™ç®¡ç† |

#### SNMP èˆ‡ç¶²è·¯è¨­å®š
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **community** | SNMP Community è¨­å®š | community_key, version, auth_user | SNMPv1/v2c/v3 èªè­‰ |
| **Vlan** | VLAN é…ç½® | VlanID, Name, Interface | VLAN ç®¡ç† |
| **Port_Name** | äº¤æ›æ©ŸåŸ åç¨± | - | åŸ ä½åˆ¥åè¨­å®š |
| **Snmp_Support** | SNMP æ”¯æ´è¨­å‚™æ¸…å–® | - | è¨­å‚™èƒ½åŠ›æ¸…å–® |

#### ç”¨æˆ¶èˆ‡æ¬Šé™
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **LoginUser** | ç®¡ç†å“¡å¸³è™Ÿ | - | ç³»çµ±ç™»å…¥ç®¡ç† |
| **UserGroup** | ç”¨æˆ¶æ¬Šé™ç¾¤çµ„ | - | æ¬Šé™ç®¡ç† |
| **User_Account** | çµ‚ç«¯ç”¨æˆ¶å¸³è™Ÿ | Account, Traffic_volume, Allow_Device_Number | ç”¨æˆ¶é…é¡ç®¡ç† |
| **User_Device** / **User_Device_cache** | ç”¨æˆ¶è¨­å‚™ | - | è¨­å‚™ç¶å®š |
| **User_Guest** | è¨ªå®¢ç”¨æˆ¶ | - | è¨ªå®¢ç®¡ç† |

#### Radius èªè­‰
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **Radius_AA** | Radius èªè­‰æˆæ¬Š | - | AAA ç®¡ç† |
| **Radius_auth** | Radius èªè­‰è¨˜éŒ„ | - | èªè­‰æ­·å² |
| **Radius_online** | Radius åœ¨ç·šç”¨æˆ¶ | session_status | åœ¨ç·šç‹€æ…‹è¿½è¹¤ |
| **Radius_session_snapshot** | æœƒè©±å¿«ç…§ | - | æœƒè©±è¨˜éŒ„ |

#### å®‰å…¨èˆ‡å¨è„…æƒ…å ±
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **threat_intelligence** | å¨è„…æƒ…å ±åº« | value, value_type, threat, riskscore | å¨è„… IP/Domain æ¯”å° |
| **threat_source** | å¨è„…æƒ…å ±ä¾†æº | - | æƒ…å ±æºç®¡ç† |
| **threat_files** | å¨è„…æª”æ¡ˆ | - | æƒ…å ±æª”æ¡ˆç®¡ç† |
| **threat_type** | å¨è„…é¡å‹ | - | å¨è„…åˆ†é¡ |
| **Security_log** | å®‰å…¨äº‹ä»¶è¨˜éŒ„ | IP, mac, block_time, release_time | å®‰å…¨äº‹ä»¶è¿½è¹¤ |
| **Security_release** | å®‰å…¨é‡‹æ”¾è¨˜éŒ„ | - | è§£å°è¨˜éŒ„ |
| **BlackList** | IP/MAC é»‘åå–® | - | é»‘åå–®ç®¡ç† |
| **firewall_security_block_ip_records** | é˜²ç«ç‰†å°é–è¨˜éŒ„ | - | é˜²ç«ç‰†æ—¥èªŒ |
| **firewall_security_unblock_ip_records** | é˜²ç«ç‰†è§£å°è¨˜éŒ„ | - | è§£å°æ—¥èªŒ |

#### ç¶²è·¯ç®¡ç†èˆ‡ç›£æ§
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **online_data** | åœ¨ç·šæ•¸æ“šçµ±è¨ˆ (å„€è¡¨æ¿) | SW_Online, IPv4_use, IP_conflict | å¯¦æ™‚ç‹€æ…‹å„€è¡¨æ¿ |
| **ip_alias** | IP åœ°å€åˆ¥å | ip, alias, UnitID | IP æ¨™è¨»ç®¡ç† |
| **nat_log_ip** | NAT è½‰æ› IP è¨˜éŒ„ | ip, unit_id, timestamp | NAT è¿½è¹¤ |
| **BaseLine** | ç¶²è·¯æµé‡åŸºç·š | MAC, IP, Rx, Tx, Date | ç•°å¸¸æµé‡åµæ¸¬ |
| **mac_ip** | MAC-IP æ˜ å°„ (æ­·å²) | - | éœæ…‹æ˜ å°„è¨˜éŒ„ |
| **mac_protocol_daily** / **mac_daily_static** | MAC å”è­°çµ±è¨ˆ (æ¯æ—¥) | - | MAC è¡Œç‚ºåˆ†æ |
| **Switch_Info_Temp** | äº¤æ›æ©Ÿè³‡è¨Šè‡¨æ™‚è¡¨ | SW_IP, UnitID, timestamp | è‡¨æ™‚æ•¸æ“šæš«å­˜ |
| **IP_Pool** | IP åœ°å€æ±  | - | IP åˆ†é…ç®¡ç† |
| **valid_dhcp_server** | åˆæ³• DHCP ä¼ºæœå™¨ç™½åå–® | - | DHCP å®‰å…¨æª¢æŸ¥ |
| **ip_conflict_ignore_ip** / **ip_conflict_ignore_mac** | IP è¡çªå¿½ç•¥æ¸…å–® | - | èª¤å ±æ’é™¤ |
| **monitor_latency_rules** | å»¶é²ç›£æ§è¦å‰‡ | - | ç¶²è·¯å»¶é²ç›£æ§ |

#### ç³»çµ±é…ç½®èˆ‡ç®¡ç†
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **General_setting** | ç³»çµ±ä¸€èˆ¬è¨­å®š | URLName, URL, UnitID | ç³»çµ±åƒæ•¸ |
| **control_conf** | æ§åˆ¶åƒæ•¸é…ç½® | - | æ§åˆ¶é‚è¼¯è¨­å®š |
| **API_Key** | API é‡‘é‘°ç®¡ç† | API, APIKey, IP, ExpireTime | API è¨ªå•æ§åˆ¶ |
| **Vendor** | è¨­å‚™å» å•†æ¸…å–® | Name | å» å•†åƒç…§è¡¨ |
| **Syslog_UnitIP_List** | Syslog ä¾†æº IP æ¸…å–® | - | Syslog æ”¶é›†è¨­å®š |
| **device_syslog_ip** | è¨­å‚™ Syslog IP | - | è¨­å‚™æ—¥èªŒè¨­å®š |
| **device_topology_attrs** | è¨­å‚™æ‹“æ’²å±¬æ€§ | - | ç¶²è·¯æ‹“æ’²è³‡æ–™ |
| **dashboard_traffic_ports** | å„€è¡¨æ¿æµé‡åŸ è¨­å®š | - | å„€è¡¨æ¿é…ç½® |

#### ä¸­å¿ƒç®¡ç†èˆ‡ä»»å‹™
| è¡¨å | æè¿° | é—œéµæ¬„ä½ | ç”¨é€” |
|-----|------|---------|------|
| **Center_Cfg** | ä¸­å¿ƒé…ç½® | - | é›†ä¸­ç®¡ç†è¨­å®š |
| **center_setting** | ä¸­å¿ƒè¨­å®š | - | ä¸­å¿ƒåƒæ•¸ |
| **center_cmd_queue** | å‘½ä»¤éšŠåˆ— | - | ä»»å‹™åˆ†ç™¼ |
| **center_cmd_queue_history** | å‘½ä»¤éšŠåˆ—æ­·å² | - | ä»»å‹™æ­·å² |
| **radar_dispatch_task** | Radar åˆ†æ´¾ä»»å‹™ | - | Radar ä»»å‹™ç®¡ç† |
| **radar_sync_queue** | Radar åŒæ­¥éšŠåˆ— | - | æ•¸æ“šåŒæ­¥ |
| **radar_task** | Radar ä»»å‹™ | - | Radar ä»»å‹™é…ç½® |
| **pcap_tasks** | å°åŒ…æŠ“å–ä»»å‹™ | - | å°åŒ…åˆ†æ |

#### å…¶ä»–åŠŸèƒ½è¡¨
| è¡¨å | æè¿° | ç”¨é€” |
|-----|------|------|
| **Maintainer** | ç¶­è­·äººå“¡ | ç¶­è­·è¯çµ¡è³‡è¨Š |
| **Notice** | ç³»çµ±é€šçŸ¥ | å…¬å‘Šç®¡ç† |
| **BlackList_Sync_Log** | é»‘åå–®åŒæ­¥æ—¥èªŒ | åŒæ­¥è¨˜éŒ„ |
| **ES_consume** | ES æ¶ˆè²»è¨˜éŒ„ | ES æ•¸æ“šè™•ç†è¿½è¹¤ |
| **document_files** | æ–‡ä»¶æª”æ¡ˆ | æ–‡ä»¶ç®¡ç† |
| **im_auth_code** / **im_member** | IM èªè­‰èˆ‡æˆå“¡ | å³æ™‚é€šè¨Šæ•´åˆ |
| **menu_conf** / **menu_group** | é¸å–®é…ç½®èˆ‡ç¾¤çµ„ | UI é¸å–®ç®¡ç† |
| **version** | ç‰ˆæœ¬è³‡è¨Š | ç³»çµ±ç‰ˆæœ¬è¿½è¹¤ |
| **phinx_migrations** | è³‡æ–™åº«é·ç§»è¨˜éŒ„ | Schema ç‰ˆæœ¬ç®¡ç† |

---

## é€£ç·šè³‡è¨Š

### ElasticSearch
- **Host:** localhost:9200
- **Cluster Name:** GSNM-ES
- **Version:** 7.17.28
- **Health Status:** green
- **ä¸»ç¯€é»:** node-M1

### MySQL (MariaDB)
- **Host:** 127.0.0.1:3306
- **Container:** snm-admin-web_mysql
- **Version:** MariaDB 10.6
- **Database:** Control_DB
- **User:** control_user
- **Password:** gentrice
- **Timezone:** Asia/Taipei

---

## ElasticSearch æ•¸æ“šçµæ§‹

### æ¦‚è¿°
ElasticSearch ä¸»è¦å­˜å„²æ™‚åºæ•¸æ“šï¼ŒæŒ‰æ—¥æœŸåˆ†å€ç´¢å¼•ï¼Œç”¨æ–¼é«˜æ•ˆæŸ¥è©¢å’Œåˆ†æå¤§é‡ç¶²è·¯æµé‡ã€æ—¥èªŒå’Œç›£æ§æ•¸æ“šã€‚

### ä¸»è¦ç´¢å¼•é¡å‹

#### 1. radar_flow_collector-YYYY.MM.DD
**ç”¨é€”:** ç¶²è·¯æµé‡æ”¶é›†å™¨ï¼ˆNetFlow/IPFIXï¼‰
**æ•¸æ“šé‡:** æ¯æ—¥ 34-57M æ¢è¨˜éŒ„ï¼Œ5-15GB
**æœ€å¤§ç´¢å¼•:** radar_flow_collector-2025.10.31 (57M è¨˜éŒ„, 15.4GB)

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½åˆ†é¡ | æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|---------|---------|------|------|
| **æ™‚é–“** | FLOW_START_MILLISECONDS | date | æµé‡é–‹å§‹æ™‚é–“ (æ¯«ç§’) |
| | FLOW_END_MILLISECONDS | date | æµé‡çµæŸæ™‚é–“ (æ¯«ç§’) |
| | EXPORT_TIME | date | å°å‡ºæ™‚é–“ |
| **ä¾†æºç«¯é»** | IPV4_SRC_ADDR | ip | ä¾†æº IPv4 åœ°å€ |
| | IPV6_SRC_ADDR | ip | ä¾†æº IPv6 åœ°å€ |
| | L4_SRC_PORT | integer | ä¾†æº L4 åŸ è™Ÿ |
| | IN_SRC_MAC | keyword | ä¾†æº MAC åœ°å€ |
| | SRC_VLAN | keyword | ä¾†æº VLAN ID |
| | SRC_AS | long | ä¾†æº AS è™Ÿç¢¼ |
| **ç›®çš„ç«¯é»** | IPV4_DST_ADDR | ip | ç›®çš„ IPv4 åœ°å€ |
| | IPV6_DST_ADDR | ip | ç›®çš„ IPv6 åœ°å€ |
| | L4_DST_PORT | integer | ç›®çš„ L4 åŸ è™Ÿ |
| | OUT_DST_MAC | keyword | ç›®çš„ MAC åœ°å€ |
| | DST_VLAN | keyword | ç›®çš„ VLAN ID |
| | DST_AS | long | ç›®çš„ AS è™Ÿç¢¼ |
| **æµé‡çµ±è¨ˆ** | IN_BYTES | long | å…¥å‘ä½å…ƒçµ„æ•¸ |
| | OUT_BYTES | long | å‡ºå‘ä½å…ƒçµ„æ•¸ |
| | TOTAL_BYTES | long | ç¸½ä½å…ƒçµ„æ•¸ |
| | IN_PKTS | long | å…¥å‘å°åŒ…æ•¸ |
| | OUT_PKTS | long | å‡ºå‘å°åŒ…æ•¸ |
| | TOTAL_PKTS | long | ç¸½å°åŒ…æ•¸ |
| **å”è­°** | PROTOCOL | keyword | å”è­°ç·¨è™Ÿ (6=TCP, 17=UDP) |
| | IP_PROTOCOL_VERSION | keyword | IP ç‰ˆæœ¬ (4 æˆ– 6) |
| | L7_PROTO_NAME | keyword | æ‡‰ç”¨å±¤å”è­°åç¨± |
| | TCP_FLAGS | keyword | TCP æ¨™èªŒ |
| **æ•ˆèƒ½æŒ‡æ¨™** | CLIENT_NW_LATENCY_MS | float | å®¢æˆ¶ç«¯ç¶²è·¯å»¶é² (æ¯«ç§’) |
| | SERVER_NW_LATENCY_MS | float | ä¼ºæœå™¨ç¶²è·¯å»¶é² (æ¯«ç§’) |
| | APPL_LATENCY_MS | float | æ‡‰ç”¨å±¤å»¶é² (æ¯«ç§’) |
| | RETRANSMITTED_IN_BYTES | long | é‡å‚³ä½å…ƒçµ„æ•¸ |
| | RETRANSMITTED_IN_PKTS | long | é‡å‚³å°åŒ…æ•¸ |
| **HTTP** | HTTP_HOST | keyword | HTTP Host æ¬„ä½ |
| | HTTP_URL | text | HTTP URL |
| | HTTP_UA | text | HTTP User-Agent |
| **DNS** | DNS_QUERY | keyword | DNS æŸ¥è©¢åŸŸå |
| | DNS_QUERY_TYPE | long | DNS æŸ¥è©¢é¡å‹ |
| | DNS_RESPONSE_IPV4 | keyword | DNS å›æ‡‰ IPv4 |
| | DNS_RESPONSE_IPV6 | keyword | DNS å›æ‡‰ IPv6 |
| **DHCP** | DHCP_CLIENT_MAC | keyword | DHCP å®¢æˆ¶ç«¯ MAC |
| | DHCP_YOUR_IP | ip | DHCP åˆ†é… IP |
| **NAT** | POST_NAT_SOURCE_IPV4_ADDRESS | keyword | NAT å¾Œä¾†æº IPv4 |
| | POST_NAT_DESTINATION_IPV4_ADDRESS | keyword | NAT å¾Œç›®çš„ IPv4 |
| | POST_NAPT_SOURCE_TRANSPORT_PORT | integer | NAPT å¾Œä¾†æºåŸ  |
| | POST_NAPT_DESTINATION_TRANSPORT_PORT | integer | NAPT å¾Œç›®çš„åŸ  |
| **Exporter** | EXPORTER_IPV4_ADDRESS | keyword | Flow Exporter IP |
| | EXPORTER_IPV6_ADDRESS | keyword | Flow Exporter IPv6 |
| | NPROBE_ID | keyword | nProbe æ¢æ¸¬å™¨ ID |
| | TOTAL_FLOWS_EXP | long | ç¸½å°å‡ºæµæ•¸ |

**æ¨£æœ¬æ•¸æ“š:**
```json
{
  "IPV4_SRC_ADDR": "192.168.20.111",
  "IPV4_DST_ADDR": "192.168.10.135",
  "PROTOCOL": 6,
  "IN_BYTES": 691,
  "FLOW_START_MILLISECONDS": 1761839998450,
  "FLOW_END_MILLISECONDS": 1761839998450,
  "L4_SRC_PORT": 40600,
  "L4_DST_PORT": 389,
  "L7_PROTO_NAME": "Unknown",
  "SERVER_NW_LATENCY_MS": 0.0,
  "CLIENT_NW_LATENCY_MS": 0.0,
  "APPL_LATENCY_MS": 0.0
}
```

---

#### 2. ip_mapping-YYYY.MM.DD
**ç”¨é€”:** IP èˆ‡ MAC åœ°å€æ˜ å°„é—œä¿‚
**æ•¸æ“šä¾†æº:** SNMP äº¤æ›æ©ŸæŸ¥è©¢
**æ•¸æ“šé‡:** æ¯æ—¥ 500-1400 æ¢è¨˜éŒ„

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ip | ip | IP åœ°å€ |
| mac | keyword | è¨­å‚™ MAC åœ°å€ |
| radar_mac | keyword | Radar æ¢æ¸¬å™¨ MAC |
| ip_version | keyword | IP ç‰ˆæœ¬ (4 æˆ– 6) |
| source | keyword | æ•¸æ“šä¾†æº (å¦‚ SNMP_SW) |
| unit_id | keyword | å–®ä½ ID |
| timestamp | date | è¨˜éŒ„æ™‚é–“æˆ³ (epoch_second) |

**æ¨£æœ¬æ•¸æ“š:**
```json
{
  "ip": "192.168.0.202",
  "mac": "2cea7f982ef7",
  "radar_mac": "005056b46cc8",
  "ip_version": "4",
  "source": "SNMP_SW",
  "unit_id": "2",
  "timestamp": 1762300383
}
```

---

#### 3. location-YYYY.MM.DD
**ç”¨é€”:** è¨­å‚™åœ¨äº¤æ›æ©Ÿä¸Šçš„ç‰©ç†ä½ç½®
**æ•¸æ“šé‡:** æ¯æ—¥ 55K-80K æ¢è¨˜éŒ„

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| mac | keyword | è¨­å‚™ MAC åœ°å€ |
| radar_mac | keyword | Radar MAC |
| sw_id | keyword | äº¤æ›æ©Ÿ ID |
| sw_port | keyword | äº¤æ›æ©ŸåŸ è™Ÿ |
| unit_id | keyword | å–®ä½ ID |
| timestamp | date | è¨˜éŒ„æ™‚é–“æˆ³ |

---

#### 4. ip_info_event-YYYY.MM.DD
**ç”¨é€”:** IP åœ°å€å‡ºç¾/æ¶ˆå¤±äº‹ä»¶è¨˜éŒ„
**æ•¸æ“šé‡:** æ¯æ—¥ 1600-4400 æ¢è¨˜éŒ„

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ip | - | IP åœ°å€ |
| mac | keyword | MAC åœ°å€ |
| radar_mac | keyword | Radar MAC |
| type | keyword | äº‹ä»¶é¡å‹ (å¦‚ snapshot) |
| unit_id | keyword | å–®ä½ ID |
| timestamp_ms | long | æ¯«ç§’æ™‚é–“æˆ³ |

---

#### 5. statistics_switch_5m/1h/1d-YYYY.MM.DD
**ç”¨é€”:** äº¤æ›æ©ŸåŸ çµ±è¨ˆè³‡è¨Šï¼ˆå¤šæ™‚é–“ç²’åº¦ï¼‰
**æ™‚é–“ç²’åº¦:** 5åˆ†é˜ / 1å°æ™‚ / 1å¤©

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| unit_id | keyword | å–®ä½ ID |
| target | ip | äº¤æ›æ©Ÿ IP |
| Source | text | JSON å­—ä¸² - æ™‚é–“å€é–“è³‡è¨Š |
| data | text | JSON å­—ä¸² - å„åŸ è©³ç´°çµ±è¨ˆ |
| timestamp | date | çµ±è¨ˆæ™‚é–“æˆ³ |

**data æ¬„ä½å…§å®¹ (JSON):**
æ¯å€‹åŸ è™Ÿç‚º keyï¼ŒåŒ…å«ä»¥ä¸‹çµ±è¨ˆ:
- `Port`: åŸ è™Ÿ
- `interval`: çµ±è¨ˆæ™‚é–“é–“éš” (ç§’)
- `tx`: å‚³é€ç¸½ä½å…ƒçµ„æ•¸
- `rx`: æ¥æ”¶ç¸½ä½å…ƒçµ„æ•¸
- `txbps`: å‚³é€é€Ÿç‡ (bps)
- `rxbps`: æ¥æ”¶é€Ÿç‡ (bps)
- `txPacketU`: å–®æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketU`: å–®æ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketNU`: éå–®æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketNU`: éå–®æ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketM`: å¤šæ’­å‚³é€å°åŒ…æ•¸
- `rxPacketM`: å¤šæ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketB`: å»£æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketB`: å»£æ’­æ¥æ”¶å°åŒ…æ•¸

---

#### 6. mac_broadcast_summary_5m-YYYY.MM.DD
**ç”¨é€”:** è’é›†åˆ°çš„ client MAC å»£æ’­é‡çµ±è¨ˆ (5 åˆ†é˜ç²’åº¦)
**æ™‚é–“ç²’åº¦:** 5 åˆ†é˜
**æ•¸æ“šé‡:** å¾…ç¢ºèª

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| mac | keyword | å®¢æˆ¶ç«¯ MAC åœ°å€ |
| unit_id | keyword | å–®ä½ ID |
| broadcast_count | long | å»£æ’­å°åŒ…æ•¸é‡ |
| broadcast_bytes | long | å»£æ’­æµé‡ä½å…ƒçµ„æ•¸ |
| timestamp | date | çµ±è¨ˆæ™‚é–“æˆ³ |
| time_window | keyword | æ™‚é–“çª—å£ (5m) |

**ç”¨é€”èªªæ˜:**
æ­¤ç´¢å¼•ç”¨æ–¼ç›£æ§ç¶²è·¯ä¸­å„ MAC åœ°å€çš„å»£æ’­è¡Œç‚º,æ¯ 5 åˆ†é˜å½™ç¸½ä¸€æ¬¡ã€‚å¯ç”¨æ–¼:
- è­˜åˆ¥ç•°å¸¸å»£æ’­è¡Œç‚ºçš„è¨­å‚™
- åµæ¸¬å»£æ’­é¢¨æš´ (Broadcast Storm)
- åˆ†æç¶²è·¯ä¸­çš„å»£æ’­æµé‡æ¨¡å¼
- ç›£æ§å¯èƒ½çš„ç¶²è·¯æ”»æ“Šæˆ–è¨­å‚™æ•…éšœ

**æ¨£æœ¬æ•¸æ“š:**
```json
{
  "mac": "b869f4a05fe7",
  "unit_id": "2",
  "broadcast_count": 1250,
  "broadcast_bytes": 750000,
  "timestamp": 1762415700,
  "time_window": "5m"
}
```

---

#### 7. status-YYYY.MM.DD
**ç”¨é€”:** Switch SNMP ç¡¬é«”ç‹€æ…‹ç›£æ§ (CPUã€Memoryã€Port è©³ç´°çµ±è¨ˆ)
**æ•¸æ“šé‡:** æ¯æ—¥ 6,000-25,000 æ¢è¨˜éŒ„
**æ¡é›†é »ç‡:** ç´„æ¯ 3-5 åˆ†é˜
**é‡è¦æ€§:** â­â­â­â­â­ (åŒ…å«å®Œæ•´çš„äº¤æ›æ©Ÿç¡¬é«”ç›£æ§æ•¸æ“š)

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| radar_mac | keyword | Radar æ¢æ¸¬å™¨ MAC |
| type | keyword | è¨­å‚™é¡å‹ (switch) |
| unit_id | keyword | å–®ä½ ID |
| target | keyword | äº¤æ›æ©Ÿ IP åœ°å€ |
| data | text | JSON å­—ä¸² - è©³ç´°ç¡¬é«”å’Œ Port çµ±è¨ˆ |
| timestamp | date | è¨˜éŒ„æ™‚é–“æˆ³ (epoch_second) |

**data æ¬„ä½å…§å®¹ (JSON):**

**ç¡¬é«”ç›£æ§è³‡è¨Š:**
- `cpu_usage`: CPU ä½¿ç”¨ç‡ (ç™¾åˆ†æ¯” 0-100)
- `memory_free`: å¯ç”¨è¨˜æ†¶é«” (MB)
- `memory_total`: ç¸½è¨˜æ†¶é«” (MB)
- `uptime`: è¨­å‚™é‹è¡Œæ™‚é–“ (å¦‚ "48 day 14 hour 2 minute 56 second")
- `query_duration`: SNMP æŸ¥è©¢è€—æ™‚ (ç§’)
- `ip`: äº¤æ›æ©Ÿ IP åœ°å€
- `id`: è¨­å‚™ ID
- `mac(s)`: è¨­å‚™ MAC åœ°å€åˆ—è¡¨ (é€—è™Ÿåˆ†éš”)
- `ip(s)`: IP åœ°å€ç¯„åœ (CIDR æ ¼å¼)
- `timestamp`: æ•¸æ“šæ¡é›†æ™‚é–“æˆ³

**Port æµé‡çµ±è¨ˆ (traffic é™£åˆ—):**
æ¯å€‹ port åŒ…å«ä»¥ä¸‹æ¬„ä½:
- `port`: åŸ è™Ÿ (å­—ä¸²)
- `speed`: åŸ é€Ÿç‡ (0/10/100/1000 Mbps)
- `port_status`: åŸ ç‹€æ…‹ ("up" / "down")
- `snmp_response_time_ms`: SNMP å›æ‡‰æ™‚é–“ (æ¯«ç§’)
- `tx`: å‚³é€ç¸½ä½å…ƒçµ„æ•¸ (ç´¯è¨ˆ)
- `rx`: æ¥æ”¶ç¸½ä½å…ƒçµ„æ•¸ (ç´¯è¨ˆ)
- `txPacketU`: å–®æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketU`: å–®æ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketNU`: éå–®æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketNU`: éå–®æ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketM`: å¤šæ’­å‚³é€å°åŒ…æ•¸
- `rxPacketM`: å¤šæ’­æ¥æ”¶å°åŒ…æ•¸
- `txPacketB`: å»£æ’­å‚³é€å°åŒ…æ•¸
- `rxPacketB`: å»£æ’­æ¥æ”¶å°åŒ…æ•¸

**æ¨£æœ¬æ•¸æ“š:**
```json
{
  "radar_mac": "000c29a5f179",
  "type": "switch",
  "unit_id": "2",
  "target": "192.168.0.10",
  "timestamp": 1762415485,
  "data": {
    "cpu_usage": 11.0,
    "memory_free": 77808.0,
    "memory_total": 131072.0,
    "uptime": "48 day 14 hour 2 minute 36 second",
    "ip": "192.168.0.10",
    "query_duration": 4.0,
    "traffic": [
      {
        "port": "1",
        "speed": "0",
        "port_status": "down",
        "snmp_response_time_ms": 1883.0,
        "tx": 0.0,
        "rx": 0.0,
        "txPacketU": 0.0,
        "rxPacketU": 0.0
      },
      {
        "port": "24",
        "speed": "1000",
        "port_status": "up",
        "snmp_response_time_ms": 1883.0,
        "tx": 7.00172178054E11,
        "rx": 4.37067535161E11
      }
    ]
  }
}
```

**å¯è¨ˆç®—æŒ‡æ¨™:**
- Memory ä½¿ç”¨ç‡ = `(1 - memory_free / memory_total) Ã— 100%`
- Port Up/Down æ¯”ä¾‹
- Port é€Ÿç‡åˆ†å¸ƒçµ±è¨ˆ (10/100/1000 Mbps)
- Port æµé‡è¶¨å‹¢ (é€šéæ™‚é–“åºåˆ—åˆ†æ)

**æ³¨æ„äº‹é …:**
- âŒ **ä¸åŒ…å«æº«åº¦ (temperature) æ•¸æ“š** - éœ€è¦é¡å¤–çš„ SNMP OID æ¡é›†
- âœ… åŒ…å«å®Œæ•´çš„ CPU å’Œ Memory ç›£æ§æ•¸æ“š
- âœ… åŒ…å«è©³ç´°çš„æ¯å€‹ Port çš„æµé‡å’Œå°åŒ…çµ±è¨ˆ
- ğŸ“Š å¯ç”¨æ–¼å¯¦æ™‚ç¡¬é«”å¥åº·ç›£æ§å’Œå‘Šè­¦

**Unit ID 2 çµ±è¨ˆ:**
- äº¤æ›æ©Ÿæ•¸é‡: 14 å°
- ä»Šæ—¥è¨˜éŒ„æ•¸: ç´„ 6,370 ç­†
- ä¸»è¦äº¤æ›æ©Ÿ IP: 192.168.0.10, 192.168.0.11, 192.168.0.12, 192.168.0.21-23, 192.168.0.101, 192.168.0.200-202, 192.168.0.253

---

#### 8. device_availability-YYYY.MM
**ç”¨é€”:** è¨­å‚™å¯ç”¨æ€§çµ±è¨ˆ (æœˆåº¦ç´¢å¼•)
**æ•¸æ“šé‡:** æ¯æœˆ 100-900 æ¢è¨˜éŒ„

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ip | - | è¨­å‚™ IP |
| unit_id | - | å–®ä½ ID |
| machineType | - | è¨­å‚™é¡å‹ (å¦‚ SW=äº¤æ›æ©Ÿ) |
| date | - | æ—¥æœŸ |
| dayofweek | - | æ˜ŸæœŸå¹¾ (0-6) |
| good | - | æ­£å¸¸æª¢æ¸¬æ¬¡æ•¸ |
| all | - | ç¸½æª¢æ¸¬æ¬¡æ•¸ |
| rate | - | å¯ç”¨ç‡ (0.0-1.0) |

**æ¨£æœ¬æ•¸æ“š:**
```json
{
  "ip": "192.168.0.101",
  "unit_id": "2",
  "machineType": "SW",
  "date": "2025-11-01",
  "dayofweek": "6",
  "good": "288",
  "all": "288",
  "rate": "1.0000"
}
```

---

#### 9. iot_info-YYYY.MM.DD
**ç”¨é€”:** IoT æ„Ÿæ¸¬å™¨æ•¸æ“š (æº«æ¿•åº¦ç›£æ§)
**æ•¸æ“šé‡:** æ¯æ—¥ 1400 æ¢è¨˜éŒ„å·¦å³

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| mac | keyword | æ„Ÿæ¸¬å™¨ MAC |
| site | keyword | ç«™é»ä»£ç¢¼ |
| site_name | keyword | ç«™é»åç¨± |
| host | text | ä¸»æ©Ÿåç¨± |
| temperture | float | æº«åº¦ (Â°C) |
| humidity | float | æ¿•åº¦ (%) |
| timestamp | date | è¨˜éŒ„æ™‚é–“ (epoch_second) |
| create_timestamp | date | å‰µå»ºæ™‚é–“ |

---

#### 10. syslog-YYYY.MM.DD
**ç”¨é€”:** ç³»çµ±æ—¥èªŒ
**æ•¸æ“šé‡:** æ¯æ—¥ 4-6M æ¢è¨˜éŒ„ï¼Œ1-1.3GB

---

#### 11. idc_access_log-YYYY.MM.DD
**ç”¨é€”:** IDC è¨ªå•æ—¥èªŒ
**æ•¸æ“šé‡:** æ¯æ—¥ 150-220 æ¢è¨˜éŒ„

---

#### 12. statistics_unit_info_1d-YYYY.MM
**ç”¨é€”:** å–®ä½çµ±è¨ˆè³‡è¨Š (æ—¥åº¦å½™ç¸½ï¼Œæœˆåº¦ç´¢å¼•)
**æ•¸æ“šé‡:** æ¯æœˆ 20-30 æ¢è¨˜éŒ„

---

### ES ç³»çµ±ç´¢å¼•
- `.kibana_*` - Kibana é…ç½®å’Œå„€è¡¨æ¿
- `.monitoring-*` - ç›£æ§æ•¸æ“š
- `.geoip_databases` - GeoIP è³‡æ–™åº«
- `.apm-*` - APM é…ç½®
- `.reporting-*` - å ±è¡¨ç”Ÿæˆè¨˜éŒ„

---

## MySQL æ•¸æ“šçµæ§‹

### æ¦‚è¿°
MySQL ä¸»è¦å­˜å„²é…ç½®ã€è¨­å‚™è³‡è¨Šã€ç”¨æˆ¶å¸³è™Ÿã€SNMP è¨­å®šã€VLAN ç®¡ç†ã€å¨è„…æƒ…å ±ç­‰ç›¸å°éœæ…‹çš„ç®¡ç†æ•¸æ“šã€‚

### æ ¸å¿ƒè¡¨çµ±è¨ˆ
| è¡¨å | è¨˜éŒ„æ•¸ | èªªæ˜ |
|-----|-------|------|
| Device | 28 | è¨­å‚™æ¸…å–® |
| User_Station | 1 | ç”¨æˆ¶çµ‚ç«¯ç«™ |
| radar | 1 | Radar æ¢æ¸¬å™¨ |
| Unit | 2 | å–®ä½/çµ„ç¹” |
| threat_intelligence | 0 | å¨è„…æƒ…å ± |
| mac_ip | 0 | MAC-IP æ˜ å°„ (å¯¦æ™‚æ•¸æ“šåœ¨ ES) |
| Security_log | 0 | å®‰å…¨æ—¥èªŒ |
| community | - | SNMP Community è¨­å®š |
| Vlan | - | VLAN è¨­å®š |
| online_data | - | åœ¨ç·šæ•¸æ“šçµ±è¨ˆ |

**è¨»:** æœ¬ç³»çµ±å…±æœ‰ 100+ å€‹ MySQL è¡¨æ ¼ï¼Œä»¥ä¸Šåˆ—å‡ºæ ¸å¿ƒç®¡ç†è¡¨ã€‚å®Œæ•´è¡¨æ ¼æ¸…å–®è«‹åƒé–±å¾ŒçºŒç« ç¯€ã€‚

### ä¸»è¦è³‡æ–™è¡¨çµæ§‹

#### 1. Device (è¨­å‚™ç®¡ç†)
**ç”¨é€”:** ç¶²è·¯è¨­å‚™æ¸…å–® (äº¤æ›æ©Ÿã€è·¯ç”±å™¨ã€é˜²ç«ç‰†ç­‰)

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | æ‰€å±¬å–®ä½ ID |
| Type | int(11) | è¨­å‚™é¡å‹ |
| Name | varchar(100) | è¨­å‚™åç¨± |
| Vendor | varchar(100) | å» å•† (å¦‚ Mikrotik) |
| Model | varchar(255) | å‹è™Ÿ |
| IP | varchar(45) | ä¸» IP åœ°å€ |
| secondary_ip | varchar(45) | æ¬¡è¦ IP |
| MAC | varchar(50) | MAC åœ°å€ |
| Login_user | varchar(16) | ç™»å…¥å¸³è™Ÿ |
| pw | varchar(16) | å¯†ç¢¼ |
| community | varchar(255) | SNMP Community |
| version | int(5) | SNMP ç‰ˆæœ¬ |
| location | varchar(100) | ç‰©ç†ä½ç½® |
| Device_Type | int(5) | è¨­å‚™é¡å‹ä»£ç¢¼ |
| status | int(11) | ç‹€æ…‹ (0=é›¢ç·š, 1=åœ¨ç·š) |
| Alarm_Status | int(5) | å‘Šè­¦ç‹€æ…‹ |
| MaxSpeed | int(11) | æœ€å¤§é€Ÿåº¦ |
| DateTime | timestamp | æœ€å¾Œæ›´æ–°æ™‚é–“ |
| Create_DateTime | timestamp | å‰µå»ºæ™‚é–“ |

**ç´¢å¼•:**
- PRIMARY KEY: ID
- UNIQUE KEY: IP_Unit (UnitID, IP)
- FULLTEXT INDEX: Vendor, Model, IP (å¤šå€‹ FULLTEXT ç´¢å¼•ç”¨æ–¼å…¨æ–‡æœå°‹)

**æ¨£æœ¬æ•¸æ“š:**
```
Name: RB450-0.101(Qos firewall)
Vendor: Mikrotik
Model: RB450Gx4
IP: 192.168.0.101
MAC: B869F4A05FE7
location: æ©Ÿæˆ¿æ©Ÿæ«ƒå±¤æ¿
community: public/public
```

---

#### 2. User_Station (ç”¨æˆ¶çµ‚ç«¯)
**ç”¨é€”:** ç”¨æˆ¶çµ‚ç«¯è¨­å‚™è¨»å†Šç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| StationID | int(11) unsigned | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | æ‰€å±¬å–®ä½ |
| Account | varchar(64) | ç”¨æˆ¶å¸³è™Ÿ |
| StationName | varchar(250) | çµ‚ç«¯åç¨± |
| IP | varchar(50) | IP åœ°å€ |
| StationMAC | varchar(50) | MAC åœ°å€ |
| StationMAC_10 | bigint(50) | MAC 10é€²åˆ¶è¡¨ç¤º |
| Model | varchar(250) | è¨­å‚™å‹è™Ÿ |
| Binding | int(5) | ç¶å®šç‹€æ…‹ |
| Description | varchar(250) | æè¿°æ¬„ä½ 1-3 |
| BandType | int(5) | å¸¶å¯¬é¡å‹ |
| WhiteList | enum('0','1') | ç™½åå–®ç‹€æ…‹ |
| DB_DateTime | datetime | è³‡æ–™åº«æ™‚é–“ |
| Apply_DateTime | datetime | ç”³è«‹æ™‚é–“ |

**æ¨£æœ¬æ•¸æ“š:**
```
StationName: GitServer
IP: 192.168.10.134
StationMAC: 005056B4DB15
```

---

#### 3. radar (Radar æ¢æ¸¬å™¨)
**ç”¨é€”:** Flow æ”¶é›†å™¨ / æ¢æ¸¬å™¨é…ç½®

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| id | int(11) | è‡ªå¢ä¸»éµ |
| ip | varchar(128) | Radar IP |
| mac | varchar(64) | Radar MAC |
| l2tp_client_ip | varchar(64) | L2TP å®¢æˆ¶ç«¯ IP |
| l2tp_username | varchar(64) | L2TP ç”¨æˆ¶å |
| l2tp_password | varchar(64) | L2TP å¯†ç¢¼ |
| type | tinyint(1) | Radar é¡å‹ |
| memo | varchar(128) | å‚™è¨» |
| createAdmin | varchar(24) | å‰µå»ºç®¡ç†å“¡ |
| createTime | datetime | å‰µå»ºæ™‚é–“ |
| modifyTime | timestamp | ä¿®æ”¹æ™‚é–“ |

---

#### 4. Unit (å–®ä½/çµ„ç¹”)
**ç”¨é€”:** å–®ä½çµ„ç¹”æ¶æ§‹ç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| UnitID | int(10) | è‡ªå¢ä¸»éµ |
| UnitName | varchar(100) | å–®ä½åç¨± |
| school_key | varchar(10) | å­¸æ ¡ä»£ç¢¼ |
| Contact | varchar(50) | è¯çµ¡äºº |
| Tel | varchar(20) | é›»è©± |
| Unit_Type | int(5) | å–®ä½é¡å‹ |
| Unit_MAC | varchar(100) | å–®ä½ MAC |
| Unit_IP | varchar(48) | å–®ä½ IP |
| domain | varchar(50) | åŸŸå |
| radarMAC | varchar(12) | Radar MAC |
| expIP | varchar(48) | å°å¤– IP |
| address | varchar(128) | åœ°å€ |
| lat | varchar(128) | ç·¯åº¦ |
| lng | varchar(128) | ç¶“åº¦ |
| county | varchar(64) | ç¸£å¸‚ |
| district | varchar(64) | å€åŸŸ |
| speed | bigint(20) | é€Ÿåº¦ (é è¨­ 100Mbps) |
| up_speed | bigint(20) | ä¸Šå‚³é€Ÿåº¦ |
| GroupID | varchar(10) | ç¾¤çµ„ ID |
| DateTime | timestamp | æ›´æ–°æ™‚é–“ |

---

#### 5. Switch_Info_Temp (äº¤æ›æ©Ÿè³‡è¨Šè‡¨æ™‚è¡¨)
**ç”¨é€”:** äº¤æ›æ©Ÿç‹€æ…‹è‡¨æ™‚å­˜å„²

**æ¬„ä½çµæ§‹:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| UnitID | int(11) | å–®ä½ ID (è¤‡åˆä¸»éµ) |
| SW_IP | varchar(50) | äº¤æ›æ©Ÿ IP (è¤‡åˆä¸»éµ) |
| type | int(2) | é¡å‹ (è¤‡åˆä¸»éµ) |
| timestamp | timestamp | æ™‚é–“æˆ³ |
| DataTime | timestamp | æ•¸æ“šæ™‚é–“ |

---


### å¨è„…æƒ…å ±è¡¨

#### threat_intelligence (å¨è„…æƒ…å ±)
**æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| id | int(20) | è‡ªå¢ä¸»éµ |
| value | varchar(512) | æƒ…å ±å€¼ |
| value_type | enum | é¡å‹ (ip/domain/text/url) |
| threat | varchar(128) | å¨è„…é¡å‹ |
| riskscore | tinyint(3) | é¢¨éšªè©•åˆ† (0-100) |
| comment | varchar(255) | è¨»é‡‹ |
| data | text | è©³ç´°æ•¸æ“š |
| source | varchar(48) | ä¾†æº |
| filename | varchar(255) | ä¾†æºæª”æ¡ˆå |
| create_time | datetime | å‰µå»ºæ™‚é–“ |

**ç›¸é—œè¡¨:**
- `threat_files` - å¨è„…æª”æ¡ˆ
- `threat_intelligence_history` - æ­·å²è¨˜éŒ„
- `threat_source` - å¨è„…ä¾†æº
- `threat_type` - å¨è„…é¡å‹

---

### å…¶ä»–é‡è¦è¡¨

#### 6. community (SNMP Community è¨­å®š)
**ç”¨é€”:** SNMP å”å®šè¨­å®š (v1/v2c/v3)

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| CID | int(11) | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | å–®ä½ ID |
| community_key | varchar(150) | Community å­—ä¸² |
| Type | int(2) | é¡å‹ |
| version | int(5) | SNMP ç‰ˆæœ¬ (1/2/3) |
| auth_user | varchar(100) | SNMPv3 èªè­‰ç”¨æˆ¶å |
| auth_pwd | varchar(255) | SNMPv3 èªè­‰å¯†ç¢¼ |
| auth_proto | varchar(5) | èªè­‰å”å®š (MD5/SHA) |
| priv_pass | varchar(255) | åŠ å¯†å¯†ç¢¼ |
| priv_proto | varchar(5) | åŠ å¯†å”å®š (DES/AES) |

---

#### 7. Vlan (VLAN è¨­å®š)
**ç”¨é€”:** VLAN é…ç½®ç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| VID | int(11) | è‡ªå¢ä¸»éµ |
| Name | varchar(20) | VLAN åç¨± |
| Interface | int(5) | ä»‹é¢ç·¨è™Ÿ |
| VlanID | int(5) | VLAN ID |
| DateTime | timestamp | æ›´æ–°æ™‚é–“ |

---

#### 8. Vendor (å» å•†è³‡è¨Š)
**ç”¨é€”:** ç¶²è·¯è¨­å‚™å» å•†åˆ—è¡¨

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| Name | varchar(200) | å» å•†åç¨± |

**èªªæ˜:** ç”¨æ–¼ Device è¡¨çš„å» å•†æ¬„ä½åƒç…§

---

#### 9. Security_log (å®‰å…¨æ—¥èªŒ)
**ç”¨é€”:** å®‰å…¨äº‹ä»¶è¨˜éŒ„ (å¨è„…æƒ…å ±æ¯”å°çµæœã€å°é–è¨˜éŒ„ç­‰)

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | å–®ä½ ID |
| IP | varchar(45) | ç›¸é—œ IP åœ°å€ |
| mac | varchar(50) | ç›¸é—œ MAC åœ°å€ |
| description | text | äº‹ä»¶æè¿° |
| block_account | varchar(50) | å°é–æ“ä½œå¸³è™Ÿ |
| block_count | int(11) | å°é–æ¬¡æ•¸ |
| block_time | datetime | å°é–æ™‚é–“ |
| ack_account | varchar(50) | ç¢ºèªå¸³è™Ÿ |
| ack_time | datetime | ç¢ºèªæ™‚é–“ |
| ack_ip-dhcp | int(5) | DHCP ç¢ºèª |
| ack_win-upgrade | int(5) | Windows æ›´æ–°ç¢ºèª |
| ack_os-reinstall | int(5) | OS é‡è£ç¢ºèª |
| ack_antivirus-install | int(5) | é˜²æ¯’è»Ÿé«”å®‰è£ç¢ºèª |
| ack_other-improve | varchar(255) | å…¶ä»–æ”¹å–„æªæ–½ |
| ack_devicename | varchar(100) | è¨­å‚™åç¨± |
| ack_filename | text | ç›¸é—œæª”æ¡ˆåç¨± |
| release_account | varchar(50) | è§£é™¤å°é–å¸³è™Ÿ |
| release_time | datetime | è§£é™¤æ™‚é–“ |

**ç´¢å¼•:**
- PRIMARY KEY: ID
- INDEX: UnitID

---

#### 10. Security_release (å®‰å…¨é‡‹æ”¾è¨˜éŒ„)
**ç”¨é€”:** å®‰å…¨å°é–è§£é™¤è¨˜éŒ„

---

#### 11. online_data (åœ¨ç·šæ•¸æ“šçµ±è¨ˆ)
**ç”¨é€”:** å„å–®ä½è¨­å‚™åœ¨ç·šç‹€æ…‹çµ±è¨ˆå„€è¡¨æ¿æ•¸æ“š

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| UnitID | int(11) | å–®ä½ ID (ä¸»éµ) |
| AP_Online | int(5) | AP åœ¨ç·šæ•¸é‡ |
| AP_Offline | int(5) | AP é›¢ç·šæ•¸é‡ |
| SW_Online | int(5) | äº¤æ›æ©Ÿåœ¨ç·šæ•¸é‡ |
| SW_Offline | int(5) | äº¤æ›æ©Ÿé›¢ç·šæ•¸é‡ |
| Server_Online | int(5) | ä¼ºæœå™¨åœ¨ç·šæ•¸é‡ |
| Server_Offline | int(5) | ä¼ºæœå™¨é›¢ç·šæ•¸é‡ |
| IPv4_use | int(5) | IPv4 ä½¿ç”¨æ•¸é‡ |
| IPv6_use | int(5) | IPv6 ä½¿ç”¨æ•¸é‡ |
| DHCP_Check | int(5) | DHCP æª¢æŸ¥ç‹€æ…‹ |
| port_loop | int(5) | åŸ è¿´è·¯æ•¸é‡ |
| IP_conflict | int(5) | IP è¡çªæ•¸é‡ |
| IP_illegal | int(5) | éæ³• IP æ•¸é‡ |
| Unknown_MAC | int(5) | æœªçŸ¥ MAC æ•¸é‡ |
| Security_Bulletin | int(5) | å®‰å…¨å…¬å‘Šæ•¸é‡ |
| Radar_Hard_Disk | varchar(100) | Radar ç¡¬ç¢Ÿç‹€æ…‹ |
| Device_Review | int(5) | è¨­å‚™å¯©æŸ¥ç‹€æ…‹ |
| DateTime | timestamp | æ›´æ–°æ™‚é–“ |

---

#### 12. ip_alias (IP åˆ¥å)
**ç”¨é€”:** IP åœ°å€åˆ¥åç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| UnitID | int(12) | å–®ä½ ID (è¤‡åˆä¸»éµ) |
| ip | varchar(128) | IP åœ°å€ (è¤‡åˆä¸»éµ) |
| alias | varchar(128) | IP åˆ¥å |
| modify_time | timestamp | ä¿®æ”¹æ™‚é–“ |
| modify_admin | varchar(64) | ä¿®æ”¹ç®¡ç†å“¡ |

**ç´¢å¼•:**
- PRIMARY KEY: (UnitID, ip)

---

#### 13. nat_log_ip (NAT æ—¥èªŒ IP)
**ç”¨é€”:** NAT è½‰æ› IP è¨˜éŒ„

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| id | int(11) | è‡ªå¢ä¸»éµ |
| unit_id | int(10) | å–®ä½ ID |
| ip | varchar(256) | IP åœ°å€ |
| timestamp | timestamp | æ™‚é–“æˆ³ |

**ç´¢å¼•:**
- PRIMARY KEY: id
- INDEX: unit_id

---

#### 14. User_Account (ç”¨æˆ¶å¸³è™Ÿ)
**ç”¨é€”:** çµ‚ç«¯ç”¨æˆ¶å¸³è™Ÿç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| UID | int(11) unsigned | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | å–®ä½ ID |
| Account | varchar(20) | å¸³è™Ÿ |
| Password | varchar(20) | å¯†ç¢¼ |
| UserName | varchar(50) | ç”¨æˆ¶åç¨± |
| Login_Rights | int(5) | ç™»å…¥æ¬Šé™ |
| Status | int(5) | ç‹€æ…‹ |
| GroupID | int(11) | ç¾¤çµ„ ID |
| Priority | int(5) | å„ªå…ˆç´š |
| Traffic_volume | int(5) | æµé‡é…é¡ |
| Allow_Device_Number | int(10) | å…è¨±è¨­å‚™æ•¸é‡ |
| Allow_session_per_Device | int(10) | æ¯è¨­å‚™å…è¨±æœƒè©±æ•¸ |
| Description | varchar(255) | æè¿° |
| DATETIME | timestamp | æ›´æ–°æ™‚é–“ |

**ç´¢å¼•:**
- PRIMARY KEY: UID
- INDEX: UnitID

---

#### 15. BaseLine (åŸºç·š)
**ç”¨é€”:** ç¶²è·¯æµé‡åŸºç·šè¨˜éŒ„

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| MAC | varchar(17) | MAC åœ°å€ |
| IP | varchar(15) | IP åœ°å€ |
| Rx | int(11) | æ¥æ”¶æµé‡åŸºç·š |
| Tx | int(11) | å‚³é€æµé‡åŸºç·š |
| Date | date | æ—¥æœŸ |
| Reboot | int(11) | é‡å•Ÿæ¬¡æ•¸ |
| LinkUpDn | int(11) | é€£çµä¸Šä¸‹æ¬¡æ•¸ |

---

#### 16. General_setting (ä¸€èˆ¬è¨­å®š)
**ç”¨é€”:** ç³»çµ±ä¸€èˆ¬è¨­å®š

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| UnitID | int(11) | å–®ä½ ID |
| URLName | varchar(255) | URL åç¨± |
| URL | varchar(255) | URL åœ°å€ |
| Remark | varchar(100) | å‚™è¨» |
| DateTime | timestamp | æ›´æ–°æ™‚é–“ |

---

#### 17. API_Key (API é‡‘é‘°ç®¡ç†)
**ç”¨é€”:** API è¨ªå•é‡‘é‘°ç®¡ç†

**ä¸»è¦æ¬„ä½:**

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|-----|------|------|
| ID | int(11) | è‡ªå¢ä¸»éµ |
| API | varchar(128) | API åç¨± |
| IP | text | å…è¨±è¨ªå•çš„ IP åˆ—è¡¨ |
| APIKey | varchar(128) | API é‡‘é‘° |
| ExpireTime | timestamp | éæœŸæ™‚é–“ |

---

#### 18. LoginUser (ç™»å…¥ç”¨æˆ¶)
ç®¡ç†å“¡å’Œç”¨æˆ¶ç™»å…¥å¸³è™Ÿ

#### 19. UserGroup (ç”¨æˆ¶çµ„)
ç”¨æˆ¶æ¬Šé™ç¾¤çµ„ç®¡ç†

#### 20. BlackList (é»‘åå–®)
IP/MAC é»‘åå–®ç®¡ç†

#### 21. IP_Pool
IP åœ°å€æ± ç®¡ç†

#### 22. Radius_* ç³»åˆ—
- `Radius_AA` - Radius èªè­‰æˆæ¬Š
- `Radius_auth` - Radius èªè­‰è¨˜éŒ„
- `Radius_online` - Radius åœ¨ç·šç”¨æˆ¶
- `Radius_session_snapshot` - æœƒè©±å¿«ç…§

#### 23. Syslog_UnitIP_List
Syslog ä¾†æº IP åˆ—è¡¨

#### 24. Port_Name
äº¤æ›æ©ŸåŸ åç¨±ç®¡ç†

#### 25. mac_protocol_daily / mac_daily_static
MAC åœ°å€å”è­°å’Œçµ±è¨ˆ (æ¯æ—¥)

#### 26. device_topology_attrs
è¨­å‚™æ‹“æ’²å±¬æ€§

#### 27. pcap_tasks
å°åŒ…æŠ“å–ä»»å‹™

#### 28. valid_dhcp_server (æœ‰æ•ˆ DHCP ä¼ºæœå™¨)
**ç”¨é€”:** åˆæ³• DHCP ä¼ºæœå™¨ç™½åå–®

#### 29. ip_conflict_ignore_ip / ip_conflict_ignore_mac
**ç”¨é€”:** IP è¡çªæª¢æ¸¬å¿½ç•¥æ¸…å–®

#### 30. monitor_latency_rules (å»¶é²ç›£æ§è¦å‰‡)
**ç”¨é€”:** ç¶²è·¯å»¶é²ç›£æ§è¦å‰‡è¨­å®š

#### 31. Snmp_Support (SNMP æ”¯æ´åˆ—è¡¨)
**ç”¨é€”:** æ”¯æ´ SNMP çš„è¨­å‚™æ¸…å–®

#### 32. device_syslog_ip (è¨­å‚™ Syslog IP)
**ç”¨é€”:** è¨­å‚™ Syslog æ”¶é›†å™¨ IP è¨­å®š

#### 33. dashboard_traffic_ports (å„€è¡¨æ¿æµé‡åŸ )
**ç”¨é€”:** å„€è¡¨æ¿æµé‡ç›£æ§åŸ ä½è¨­å®š

#### 34. User_Device / User_Device_cache
**ç”¨é€”:** ç”¨æˆ¶è¨­å‚™åŠå¿«å–è³‡æ–™

#### 35. User_Guest
**ç”¨é€”:** è¨ªå®¢ç”¨æˆ¶ç®¡ç†

#### 36. User_Station_apply / User_Station_cache / User_Station_log
**ç”¨é€”:** ç”¨æˆ¶çµ‚ç«¯ç”³è«‹ã€å¿«å–åŠæ—¥èªŒ

#### 37. control_conf (æ§åˆ¶é…ç½®)
**ç”¨é€”:** ç³»çµ±æ§åˆ¶åƒæ•¸é…ç½®

#### 38. Center_* ç³»åˆ—
- `Center_Cfg` - ä¸­å¿ƒé…ç½®
- `center_cmd_queue` - å‘½ä»¤éšŠåˆ—
- `center_cmd_queue_history` - å‘½ä»¤éšŠåˆ—æ­·å²
- `center_setting` - ä¸­å¿ƒè¨­å®š

#### 39. firewall_security_block_ip_records / firewall_security_unblock_ip_records
**ç”¨é€”:** é˜²ç«ç‰†å®‰å…¨ IP å°é–/è§£å°è¨˜éŒ„

---

## æ•¸æ“šæµå‘èˆ‡é—œè¯

### 1. è¨­å‚™ç™¼ç¾èˆ‡ç®¡ç†æµç¨‹
```
Device (MySQL) â†â†’ Unit (MySQL)
    â†“
SNMP æ”¶é›†
    â†“
ip_mapping (ES) + location (ES)
```

### 2. æµé‡æ”¶é›†æµç¨‹
```
ç¶²è·¯è¨­å‚™ (NetFlow/IPFIX)
    â†“
radar (MySQL é…ç½®) â†’ nProbe/æ”¶é›†å™¨
    â†“
radar_flow_collector (ES)
```

### 3. è¨­å‚™ä½ç½®è¿½è¹¤
```
SNMP æŸ¥è©¢ Switch
    â†“
mac_ip (MySQL) + ip_mapping (ES)
    â†“
location (ES) â† é—œè¯ â†’ Device (MySQL)
```

### 4. çµ±è¨ˆæ•¸æ“šç”Ÿæˆ
```
radar_flow_collector (ES åŸå§‹æµé‡)
    â†“
èšåˆé‹ç®—
    â†“
statistics_switch_5m/1h/1d (ES)
    â†“
statistics_unit_info_1d (ES)
```

### 5. å¨è„…æƒ…å ±è™•ç†
```
threat_source (MySQL ä¾†æºé…ç½®)
    â†“
å®šæœŸæ›´æ–°
    â†“
threat_intelligence (MySQL)
    â†“
æ¯”å° radar_flow_collector (ES)
    â†“
Security_log (MySQL) + å‘Šè­¦
```

---

## é—œéµé—œè¯å­—æ®µ

### Unit ID (å–®ä½è­˜åˆ¥)
- **MySQL:** Unit.UnitID
- **ElasticSearch:** unit_id (keyword)
- **é—œè¯:** æ‰€æœ‰è¡¨éƒ½é€šé unit_id/UnitID é—œè¯åˆ°ç‰¹å®šå–®ä½

### MAC åœ°å€ (è¨­å‚™è­˜åˆ¥)
- **æ ¼å¼:**
  - MySQL: `B869F4A05FE7` (å¤§å¯«ç„¡åˆ†éš”)
  - ES: `b869f4a05fe7` (å°å¯«ç„¡åˆ†éš”)
- **é—œè¯è¡¨:**
  - Device.MAC
  - User_Station.StationMAC
  - radar.mac / radar_mac
  - ip_mapping.mac / radar_mac
  - location.mac / radar_mac

### IP åœ°å€ (ç¶²è·¯è­˜åˆ¥)
- **MySQL:** varchar æ ¼å¼ (å¦‚ `192.168.0.101`)
- **ElasticSearch:** ip é¡å‹ (æ”¯æ´ CIDR æŸ¥è©¢)
- **é—œè¯:**
  - Device.IP
  - User_Station.IP
  - radar.ip
  - ip_mapping.ip
  - statistics_switch_*.target

### äº¤æ›æ©Ÿè­˜åˆ¥
- **Switch IP:**
  - MySQL: Device.IP (where Device_Type = SW)
  - ES: statistics_switch_*.target
- **Switch Port:**
  - ES: location.sw_port
  - MySQL: Port_Name

### Radar è­˜åˆ¥
- **Radar MAC:**
  - MySQL: radar.mac, Unit.radarMAC
  - ES: radar_mac (å¤šå€‹ç´¢å¼•)
- **NPROBE_ID:**
  - ES: radar_flow_collector.NPROBE_ID

---


#### 1. æŸ¥è©¢ç‰¹å®š IP çš„æµé‡
```json
GET /radar_flow_collector-2025.11.*/_search
{
  "query": {
    "bool": {
      "should": [
        { "term": { "IPV4_SRC_ADDR": "192.168.0.101" }},
        { "term": { "IPV4_DST_ADDR": "192.168.0.101" }}
      ]
    }
  }
}
```

#### 2. æŸ¥è©¢é«˜æµé‡æœƒè©± (>1GB)
```json
GET /radar_flow_collector-2025.11.*/_search
{
  "query": {
    "range": {
      "TOTAL_BYTES": {
        "gte": 1073741824
      }
    }
  }
}
```

#### 3. æŸ¥è©¢ç‰¹å®šæ™‚é–“æ®µçš„ DNS æŸ¥è©¢
```json
GET /radar_flow_collector-2025.11.*/_search
{
  "query": {
    "bool": {
      "must": [
        { "exists": { "field": "DNS_QUERY" }},
        {
          "range": {
            "FLOW_START_MILLISECONDS": {
              "gte": "2025-11-05T00:00:00",
              "lte": "2025-11-05T23:59:59"
            }
          }
        }
      ]
    }
  }
}
```

#### 4. æŸ¥è©¢ MAC åœ°å€çš„ä½ç½®æ­·å²
```json
GET /location-2025.10.*/_search
{
  "query": {
    "term": {
      "mac": "005056b4db15"
    }
  },
  "sort": [
    { "timestamp": { "order": "desc" }}
  ]
}
```

#### 5. å½™ç¸½äº¤æ›æ©ŸåŸ æµé‡ Top 10
```json
GET /statistics_switch_1h-2025.11/_search
{
  "size": 0,
  "aggs": {
    "top_switches": {
      "terms": {
        "field": "target",
        "size": 10
      }
    }
  }
}
```

### MySQL æŸ¥è©¢ç¯„ä¾‹

#### 1. æŸ¥è©¢æ‰€æœ‰åœ¨ç·šè¨­å‚™
```sql
SELECT Name, IP, Vendor, Model, location
FROM Device
WHERE status = 1
ORDER BY Name;
```

#### 2. æŸ¥è©¢è¨­å‚™åŠå…¶æ‰€å±¬å–®ä½
```sql
SELECT d.Name, d.IP, d.Vendor, u.UnitName, u.county
FROM Device d
LEFT JOIN Unit u ON d.UnitID = u.UnitID;
```

#### 3. æŸ¥è©¢ Radius åœ¨ç·šç”¨æˆ¶
```sql
SELECT * FROM Radius_online
WHERE session_status = 'active';
```

#### 4. æŸ¥è©¢åœ¨ç·šæ•¸æ“šçµ±è¨ˆ
```sql
SELECT UnitID, SW_Online, SW_Offline, IPv4_use, IPv6_use, IP_conflict
FROM online_data
WHERE UnitID = 2;
```

#### 5. æŸ¥è©¢ IP åˆ¥å
```sql
SELECT ip, alias, modify_admin, modify_time
FROM ip_alias
WHERE UnitID = 2;
```

#### 6. æŸ¥è©¢å¨è„…æƒ…å ± (IP é¡å‹)
```sql
SELECT value, threat, riskscore, source
FROM threat_intelligence
WHERE value_type = 'ip'
ORDER BY riskscore DESC;
```

---


## ç¸½çµ

æœ¬ç³»çµ±æ¡ç”¨ **ElasticSearch + MySQL** æ··åˆæ¶æ§‹ï¼š

- **ElasticSearch:** è² è²¬æ™‚åºæ•¸æ“šã€æ—¥èªŒå’Œå¤§é‡å¯¦æ™‚æŸ¥è©¢
  - æµé‡æ•¸æ“š (NetFlow)
  - è¨­å‚™ä½ç½®å’Œ IP æ˜ å°„
  - çµ±è¨ˆæ•¸æ“šå’Œæ—¥èªŒ

- **MySQL:** è² è²¬é…ç½®ã€é—œä¿‚æ•¸æ“šå’Œäº‹å‹™æ€§æ“ä½œ
  - è¨­å‚™å’Œç”¨æˆ¶ç®¡ç†
  - SNMP å’Œ VLAN è¨­å®š
  - æ¬Šé™å’Œèªè­‰
  - å¨è„…æƒ…å ±
  - å®‰å…¨æ—¥èªŒå’Œå°é–è¨˜éŒ„
  - ç¶²è·¯åŸºç·šå’Œåˆ¥åç®¡ç†

å…©è€…é€šé **unit_id, IP, MAC** ç­‰é—œéµå­—æ®µé€²è¡Œé—œè¯ï¼Œå½¢æˆå®Œæ•´çš„ç¶²è·¯ç®¡ç†ç³»çµ±æ•¸æ“šæ¶æ§‹ã€‚

---

**å ±å‘ŠçµæŸ**
